<!doctype html>
<html lang="vi" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - English Blossom</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #fef3f8 0%, #f8fafc 50%, #fef1f4 100%);
    }
    
    .gradient-text {
      background: linear-gradient(135deg, #ec4899 0%, #f43f5e 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .sidebar {
      background: linear-gradient(180deg, #ffffff 0%, #fefcfd 100%);
      box-shadow: 4px 0 24px rgba(0, 0, 0, 0.06);
      transition: all 0.3s ease;
      border-right: 1px solid rgba(236, 72, 153, 0.1);
    }
    
    .sidebar-item {
      padding: 0.875rem 1.25rem;
      margin: 0.25rem 0.75rem;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.875rem;
      font-weight: 500;
      font-size: 0.9375rem;
      color: #64748b;
      position: relative;
      overflow: hidden;
    }
    
    .sidebar-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 4px;
      background: linear-gradient(135deg, #ec4899 0%, #f43f5e 100%);
      transform: scaleY(0);
      transition: transform 0.3s ease;
      border-radius: 0 4px 4px 0;
    }
    
    .sidebar-item:hover {
      background: linear-gradient(135deg, #fce7f3 0%, #fff1f2 100%);
      color: #ec4899;
      transform: translateX(4px);
    }
    
    .sidebar-item:hover::before {
      transform: scaleY(1);
    }
    
    .sidebar-item.active {
      background: linear-gradient(135deg, #fce7f3 0%, #fff1f2 100%);
      color: #ec4899;
      box-shadow: 0 4px 12px rgba(236, 72, 153, 0.15);
    }
    
    .sidebar-item.active::before {
      transform: scaleY(1);
    }
    
    .card {
      background: white;
      border-radius: 1rem;
      padding: 1.5rem;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(236, 72, 153, 0.08);
    }
    
    .card:hover {
      box-shadow: 0 12px 32px rgba(236, 72, 153, 0.12);
      transform: translateY(-4px);
      border-color: rgba(236, 72, 153, 0.2);
    }
    
    .stat-card {
      background: linear-gradient(135deg, #ffffff 0%, #fefcfd 100%);
      border-radius: 1rem;
      padding: 1.5rem;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      border: 1px solid rgba(236, 72, 153, 0.1);
      position: relative;
      overflow: hidden;
    }
    
    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 150px;
      height: 150px;
      background: radial-gradient(circle, rgba(236, 72, 153, 0.1) 0%, transparent 70%);
      transform: translate(50%, -50%);
      transition: all 0.4s ease;
    }
    
    .stat-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 16px 48px rgba(236, 72, 153, 0.18);
      border-color: rgba(236, 72, 153, 0.3);
    }
    
    .stat-card:hover::before {
      width: 200px;
      height: 200px;
    }
    
    .stat-number {
      font-size: 2rem;
      font-weight: 700;
      background: linear-gradient(135deg, #ec4899 0%, #f43f5e 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -0.01em;
    }
    
    .table-container {
      overflow-x: auto;
      background: white;
      border-radius: 1.25rem;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);
      border: 1px solid rgba(236, 72, 153, 0.08);
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    th {
      background: linear-gradient(135deg, #fce7f3 0%, #fff1f2 100%);
      padding: 0.875rem 1rem;
      text-align: left;
      font-weight: 600;
      color: #ec4899;
      position: sticky;
      top: 0;
      z-index: 10;
      font-size: 0.8125rem;
      text-transform: uppercase;
      letter-spacing: 0.025em;
      border-bottom: 2px solid rgba(236, 72, 153, 0.2);
    }
    
    td {
      padding: 0.875rem 1rem;
      border-bottom: 1px solid #f1f5f9;
      transition: all 0.2s ease;
      font-size: 0.875rem;
    }
    
    tr:hover {
      background: linear-gradient(90deg, #fef3f8 0%, transparent 100%);
    }
    
    tr:hover td {
      border-color: rgba(236, 72, 153, 0.1);
    }
    
    .badge {
      display: inline-block;
      padding: 0.25rem 0.625rem;
      border-radius: 9999px;
      font-size: 0.6875rem;
      font-weight: 600;
      letter-spacing: 0.015em;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    }
    
    .badge-new {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      color: #1e40af;
    }
    
    .badge-pending {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      color: #92400e;
    }
    
    .badge-completed {
      background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
      color: #065f46;
    }
    
    .badge-user {
      background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
      color: #3730a3;
    }
    
    .badge-trial {
      background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%);
      color: #9f1239;
    }
    
    .badge-beginner {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      color: #1e40af;
    }
    
    .badge-elementary {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      color: #92400e;
    }
    
    .badge-intermediate {
      background: linear-gradient(135deg, #fef08a 0%, #fde047 100%);
      color: #854d0e;
    }
    
    .badge-upper {
      background: linear-gradient(135deg, #fed7aa 0%, #fdba74 100%);
      color: #9a3412;
    }
    
    .badge-advanced {
      background: linear-gradient(135deg, #fecaca 0%, #fca5a5 100%);
      color: #991b1b;
    }
    
    .btn {
      padding: 0.5rem 1.25rem;
      border-radius: 0.5rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.875rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);
      color: white;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(236, 72, 153, 0.35);
      background: linear-gradient(135deg, #db2777 0%, #ec4899 100%);
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      color: #475569;
      border: 1px solid #e2e8f0;
    }
    
    .btn-secondary:hover {
      background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
      border-color: #cbd5e1;
      transform: translateY(-1px);
    }
    
    .btn-success {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
    }
    
    .btn-success:hover {
      background: linear-gradient(135deg, #059669 0%, #047857 100%);
      box-shadow: 0 8px 20px rgba(16, 185, 129, 0.35);
    }
    
    .btn-danger {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      color: white;
    }
    
    .btn-danger:hover {
      background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
      box-shadow: 0 8px 20px rgba(239, 68, 68, 0.35);
    }
    
    .btn-sm {
      padding: 0.5rem 1.25rem;
      font-size: 0.875rem;
    }
    
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }
    
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.65);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 1rem;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .modal-content {
      background: white;
      border-radius: 1rem;
      padding: 2rem;
      max-width: 700px;
      width: 100%;
      max-height: 90%;
      overflow-y: auto;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      position: relative;
      animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(236, 72, 153, 0.1);
    }
    
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .close-btn {
      position: absolute;
      top: 1.25rem;
      right: 1.25rem;
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      border: 1px solid #e2e8f0;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.25rem;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #64748b;
    }
    
    .close-btn:hover {
      background: linear-gradient(135deg, #ec4899 0%, #f43f5e 100%);
      color: white;
      transform: rotate(90deg) scale(1.1);
      box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3);
    }
    
    .hidden {
      display: none;
    }
    
    .search-box {
      position: relative;
    }
    
    .search-box input {
      width: 100%;
      padding: 0.875rem 1.25rem 0.875rem 3.25rem;
      border: 2px solid #e2e8f0;
      border-radius: 1rem;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-size: 0.9375rem;
      background: white;
    }
    
    .search-box input:focus {
      outline: none;
      border-color: #ec4899;
      box-shadow: 0 0 0 4px rgba(236, 72, 153, 0.1);
      background: #fefcfd;
    }
    
    .search-icon {
      position: absolute;
      left: 1.25rem;
      top: 50%;
      transform: translateY(-50%);
      color: #94a3b8;
      font-size: 1.25rem;
    }
    
    .filter-btn {
      padding: 0.875rem 1.75rem;
      border: 2px solid #e2e8f0;
      background: white;
      border-radius: 1rem;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-weight: 600;
      font-size: 0.9375rem;
    }
    
    .filter-btn:hover {
      border-color: #fce7f3;
      background: #fef3f8;
      color: #ec4899;
      transform: translateY(-2px);
    }
    
    .filter-btn.active {
      border-color: #ec4899;
      background: linear-gradient(135deg, #fce7f3 0%, #fff1f2 100%);
      color: #ec4899;
      box-shadow: 0 4px 12px rgba(236, 72, 153, 0.2);
    }
    
    .info-row {
      display: flex;
      padding: 1rem 0;
      border-bottom: 1px solid #f3f4f6;
    }
    
    .info-label {
      font-weight: 700;
      color: #6b7280;
      width: 150px;
      flex-shrink: 0;
    }
    
    .info-value {
      color: #1f2937;
      flex: 1;
    }
    
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid #f3f4f6;
      border-top-color: #ec4899;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
      color: #9ca3af;
    }
    
    .empty-state-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
    }
    
    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: white;
      padding: 1rem 1.5rem;
      border-radius: 0.75rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      display: flex;
      align-items: center;
      gap: 1rem;
      z-index: 2000;
      animation: slideIn 0.3s ease;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    .toast.success {
      border-left: 4px solid #10b981;
    }
    
    .toast.error {
      border-left: 4px solid #ef4444;
    }
    
    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        left: -100%;
        top: 0;
        height: 100%;
        z-index: 100;
      }
      
      .sidebar.open {
        left: 0;
      }
      
      .stat-number {
        font-size: 1.5rem;
      }
      
      .info-row {
        flex-direction: column;
      }
      
      .info-label {
        width: 100%;
        margin-bottom: 0.5rem;
      }
      
      .toast {
        left: 1rem;
        right: 1rem;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full w-full">
  <div class="w-full h-full flex overflow-hidden"><!-- Sidebar -->
   <aside id="sidebar" class="sidebar w-64 flex-shrink-0">
    <div class="p-4 border-b border-gray-100">
     <h1 class="text-xl font-bold gradient-text" id="dashboardTitle">Admin Dashboard</h1>
     <p class="text-xs text-gray-500 mt-0.5">English Blossom</p>
    </div>
    <nav class="py-3">
     <div class="sidebar-item active" onclick="showSection('overview')"><span class="text-base">üìä</span> <span>T·ªïng quan</span>
     </div>
     <div class="sidebar-item" onclick="showSection('requests')"><span class="text-base">üìù</span> <span>Y√™u c·∫ßu t∆∞ v·∫•n</span>
     </div>
     <div class="sidebar-item" onclick="showSection('users')"><span class="text-base">üë•</span> <span>Ng∆∞·ªùi d√πng</span>
     </div>
     <div class="sidebar-item" onclick="showSection('settings')"><span class="text-base">‚öôÔ∏è</span> <span>C√†i ƒë·∫∑t</span>
     </div>
    </nav>
   </aside><!-- Main Content -->
   <main class="flex-1 overflow-auto gradient-bg"><!-- Header -->
    <header class="bg-white shadow-sm p-4 flex items-center justify-between sticky top-0 z-50 border-b border-gray-100">
     <div>
      <h2 id="welcomeMessage" class="text-lg font-semibold text-gray-800">Ch√†o m·ª´ng Admin! üëã</h2>
      <p class="text-gray-500 text-xs mt-0.5 font-medium">Qu·∫£n l√Ω h·ªá th·ªëng English Blossom</p>
     </div>
     <div class="flex items-center gap-4"><button class="btn btn-secondary btn-sm relative"> üîî <span class="badge badge-new absolute -top-2 -right-2" id="notificationCount">0</span> </button>
      <div class="w-9 h-9 rounded-full bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center text-white font-semibold text-sm shadow-md ring-2 ring-pink-100 hover:ring-4 transition-all cursor-pointer">
       A
      </div>
     </div>
    </header><!-- Content Area -->
    <div class="p-3 md:p-4"><!-- Overview Section -->
     <section id="overviewSection">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
       <div class="stat-card" onclick="showSection('requests')">
        <div class="flex items-center justify-between mb-1.5"><span class="text-xl">üìù</span> <span class="badge badge-new">M·ªõi</span>
        </div>
        <div class="stat-number" id="totalRequests">
         0
        </div>
        <div class="text-gray-600 font-medium text-sm">
         Y√™u c·∫ßu t∆∞ v·∫•n
        </div>
       </div>
       <div class="stat-card" onclick="showSection('users')">
        <div class="flex items-center justify-between mb-1.5"><span class="text-xl">üë•</span> <span class="badge badge-user">Active</span>
        </div>
        <div class="stat-number" id="totalUsers">
         0
        </div>
        <div class="text-gray-600 font-medium text-sm">
         Ng∆∞·ªùi d√πng
        </div>
       </div>
       <div class="stat-card">
        <div class="flex items-center justify-between mb-1.5"><span class="text-xl">‚è≥</span> <span class="badge badge-pending">Ch·ªù</span>
        </div>
        <div class="stat-number" id="pendingRequests">
         0
        </div>
        <div class="text-gray-600 font-medium text-sm">
         ƒêang x·ª≠ l√Ω
        </div>
       </div>
       <div class="stat-card">
        <div class="flex items-center justify-between mb-1.5"><span class="text-xl">‚úÖ</span> <span class="badge badge-completed">Ho√†n t·∫•t</span>
        </div>
        <div class="stat-number" id="completedRequests">
         0
        </div>
        <div class="text-gray-600 font-medium text-sm">
         ƒê√£ ho√†n th√†nh
        </div>
       </div>
      </div><!-- Quick Actions -->
      <div class="card mb-4">
       <h3 class="text-base font-semibold text-gray-800 mb-3">‚ö° H√†nh ƒë·ªông nhanh</h3>
       <div class="flex flex-wrap gap-2"><button onclick="showAddRequestModal()" class="btn btn-primary btn-sm"> ‚ûï Th√™m y√™u c·∫ßu </button> <button onclick="showAddUserModal()" class="btn btn-primary btn-sm"> üë§ Th√™m ng∆∞·ªùi d√πng </button> <button onclick="exportData()" class="btn btn-secondary btn-sm"> üì• Xu·∫•t d·ªØ li·ªáu </button> <button onclick="refreshData()" class="btn btn-secondary btn-sm"> üîÑ L√†m m·ªõi </button>
       </div>
      </div><!-- Recent Activity -->
      <div class="card">
       <h3 class="text-base font-semibold text-gray-800 mb-3">üïê Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h3>
       <div id="recentActivity"><!-- Will be populated by JS -->
       </div>
      </div>
     </section><!-- Requests Section -->
     <section id="requestsSection" class="hidden">
      <div class="mb-6 flex flex-col md:flex-row gap-4">
       <div class="search-box flex-1"><span class="search-icon">üîç</span> <input type="text" id="requestSearch" placeholder="T√¨m ki·∫øm theo t√™n, email, s·ªë ƒëi·ªán tho·∫°i..." oninput="filterRequests()">
       </div>
       <div class="flex gap-2 flex-wrap"><button class="filter-btn active" data-status="all" onclick="filterByStatus('all', 'request')">T·∫•t c·∫£</button> <button class="filter-btn" data-status="new" onclick="filterByStatus('new', 'request')">M·ªõi</button> <button class="filter-btn" data-status="pending" onclick="filterByStatus('pending', 'request')">ƒêang x·ª≠ l√Ω</button> <button class="filter-btn" data-status="completed" onclick="filterByStatus('completed', 'request')">Ho√†n th√†nh</button>
       </div>
      </div>
      <div class="table-container">
       <table>
        <thead>
         <tr>
          <th>H·ªç t√™n</th>
          <th>Li√™n h·ªá</th>
          <th>Th·ªùi gian</th>
          <th>Tr·∫°ng th√°i</th>
          <th>Ng√†y t·∫°o</th>
          <th>Thao t√°c</th>
         </tr>
        </thead>
        <tbody id="requestsTableBody"><!-- Will be populated by JS -->
        </tbody>
       </table>
      </div>
     </section><!-- Users Section -->
     <section id="usersSection" class="hidden">
      <div class="mb-6 flex flex-col md:flex-row gap-4">
       <div class="search-box flex-1"><span class="search-icon">üîç</span> <input type="text" id="userSearch" placeholder="T√¨m ki·∫øm ng∆∞·ªùi d√πng..." oninput="filterUsers()">
       </div>
       <div class="flex gap-2 flex-wrap"><button class="filter-btn active" data-level="all" onclick="filterByLevel('all')">T·∫•t c·∫£</button> <button class="filter-btn" data-level="beginner" onclick="filterByLevel('beginner')">A1</button> <button class="filter-btn" data-level="elementary" onclick="filterByLevel('elementary')">A2</button> <button class="filter-btn" data-level="intermediate" onclick="filterByLevel('intermediate')">B1</button> <button class="filter-btn" data-level="upper" onclick="filterByLevel('upper')">B2</button> <button class="filter-btn" data-level="advanced" onclick="filterByLevel('advanced')">C1-C2</button>
       </div>
      </div>
      <div class="table-container">
       <table>
        <thead>
         <tr>
          <th>T√†i kho·∫£n</th>
          <th>Email</th>
          <th>Tr√¨nh ƒë·ªô</th>
          <th>S·ªë ƒëi·ªán tho·∫°i</th>
          <th>Ng√†y ƒëƒÉng k√Ω</th>
          <th>Thao t√°c</th>
         </tr>
        </thead>
        <tbody id="usersTableBody"><!-- Will be populated by JS -->
        </tbody>
       </table>
      </div>
     </section><!-- Settings Section -->
     <section id="settingsSection" class="hidden">
      <div class="card mb-6">
       <h3 class="text-xl font-bold text-gray-800 mb-4">‚öôÔ∏è C√†i ƒë·∫∑t h·ªá th·ªëng</h3>
       <div class="space-y-4">
        <div class="p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500">
         <h4 class="font-bold text-blue-900 mb-2">üí° V·ªÅ d·ªØ li·ªáu</h4>
         <p class="text-sm text-blue-800">Hi·ªán t·∫°i d·ªØ li·ªáu ƒëang ƒë∆∞·ª£c l∆∞u t·∫°m trong localStorage c·ªßa tr√¨nh duy   t. Em c√≥ th·ªÉ t√≠ch h·ª£p database ri√™ng v√†o ph·∫ßn code JavaScript.</p>
        </div>
        <div class="p-4 bg-green-50 rounded-lg border-l-4 border-green-500">
         <h4 class="font-bold text-green-900 mb-2">üîå T√≠ch h·ª£p Database</h4>
         <p class="text-sm text-green-800 mb-3">ƒê·ªÉ k·∫øt n·ªëi v·ªõi database, em c·∫ßn thay th·∫ø c√°c h√†m trong ph·∫ßn "Database Functions" b·∫±ng API calls c·ªßa em:</p>
         <ul class="text-sm text-green-800 list-disc list-inside space-y-1">
          <li>saveData() - L∆∞u d·ªØ li·ªáu</li>
          <li>loadData() - T·∫£i d·ªØ li·ªáu</li>
          <li>addRequest() - Th√™m y√™u c·∫ßu m·ªõi</li>
          <li>addUser() - Th√™m ng∆∞·ªùi d√πng m·ªõi</li>
          <li>updateRequest() - C·∫≠p nh·∫≠t y√™u c·∫ßu</li>
          <li>deleteItem() - X√≥a d·ªØ li·ªáu</li>
         </ul>
        </div>
        <div class="p-4 bg-yellow-50 rounded-lg border-l-4 border-yellow-500">
         <h4 class="font-bold text-yellow-900 mb-2">üìä Th·ªëng k√™</h4>
         <p class="text-sm text-yellow-800">T·ªïng y√™u c·∫ßu: <strong id="settingsRequests">0</strong><br>
           T·ªïng ng∆∞·ªùi d√πng: <strong id="settingsUsers">0</strong><br>
           Dung l∆∞·ª£ng localStorage: <strong id="storageSize">0 KB</strong></p>
        </div>
        <div class="flex gap-3"><button onclick="clearAllData()" class="btn btn-danger"> üóëÔ∏è X√≥a to√†n b·ªô d·ªØ li·ªáu </button> <button onclick="exportData()" class="btn btn-secondary"> üì• Sao l∆∞u d·ªØ li·ªáu </button>
        </div>
       </div>
      </div>
     </section>
    </div>
   </main>
  </div><!-- Modal -->
  <div id="modal" class="modal-overlay hidden" onclick="closeModal(event)">
   <div class="modal-content" onclick="event.stopPropagation()"><button class="close-btn" onclick="closeModal()">‚úï</button>
    <div id="modalContent"></div>
   </div>
  </div><!-- Toast Container -->
  <div id="toastContainer"></div>
  <script>
    // Data storage using localStorage (em c√≥ th·ªÉ thay b·∫±ng API calls)
    let allData = [];
    let currentFilter = { status: 'all', level: 'all', section: 'request' };

    const defaultConfig = {
      dashboard_title: "Admin Dashboard",
      welcome_message: "Ch√†o m·ª´ng Admin! üëã",
      primary_color: "#ec4899",
      secondary_color: "#f472b6",
      accent_color: "#f43f5e",
      background_color: "#fce7f3",
      text_color: "#1f2937"
    };

    // ==================== DATABASE FUNCTIONS ====================
    // Em c√≥ th·ªÉ thay th·∫ø c√°c h√†m n√†y b·∫±ng API calls t·ªõi database c·ªßa em

    function saveData() {
      try {
        localStorage.setItem('englishBlossomData', JSON.stringify(allData));
        return true;
      } catch (e) {
        console.error('Error saving data:', e);
        return false;
      }
    }

    function loadData() {
      try {
        const data = localStorage.getItem('englishBlossomData');
        if (data) {
          allData = JSON.parse(data);
        } else {
          allData = [];
        }
        updateUI();
      } catch (e) {
        console.error('Error loading data:', e);
        allData = [];
      }
    }

    function generateId() {
      return 'id_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    }

    function addRequest(requestData) {
      const newRequest = {
        id: generateId(),
        ...requestData,
        created_at: new Date().toISOString()
      };
      allData.push(newRequest);
      saveData();
      updateUI();
      return newRequest;
    }

    function addUser(userData) {
      const newUser = {
        id: generateId(),
        ...userData,
        created_at: new Date().toISOString()
      };
      allData.push(newUser);
      saveData();
      updateUI();
      return newUser;
    }

    function updateRequest(id, updates) {
      const index = allData.findIndex(item => item.id === id);
      if (index !== -1) {
        allData[index] = { ...allData[index], ...updates };
        saveData();
        updateUI();
        return true;
      }
      return false;
    }

    function deleteItem(id) {
      const index = allData.findIndex(item => item.id === id);
      if (index !== -1) {
        allData.splice(index, 1);
        saveData();
        updateUI();
        return true;
      }
      return false;
    }

    function clearAllData() {
      const confirmBtn = event.currentTarget;
      
      if (!confirmBtn.dataset.confirm) {
        confirmBtn.dataset.confirm = 'true';
        confirmBtn.innerHTML = '‚ö†Ô∏è Nh·∫•n l·∫°i ƒë·ªÉ x√°c nh·∫≠n x√≥a';
        confirmBtn.style.background = '#dc2626';
        
        setTimeout(() => {
          delete confirmBtn.dataset.confirm;
          confirmBtn.innerHTML = 'üóëÔ∏è X√≥a to√†n b·ªô d·ªØ li·ªáu';
          confirmBtn.style.background = '';
        }, 3000);
        return;
      }
      
      allData = [];
      saveData();
      updateUI();
      showToast('ƒê√£ x√≥a to√†n b·ªô d·ªØ li·ªáu', 'success');
      delete confirmBtn.dataset.confirm;
      confirmBtn.innerHTML = 'üóëÔ∏è X√≥a to√†n b·ªô d·ªØ li·ªáu';
      confirmBtn.style.background = '';
    }

    // ==================== END DATABASE FUNCTIONS ====================

    // Update all UI components
    function updateUI() {
      updateStats();
      renderRequests();
      renderUsers();
      renderRecentActivity();
      updateSettingsStats();
    }

    // Update statistics
    function updateStats() {
      const requests = allData.filter(d => d.type === 'contact' || d.type === 'trial');
      const users = allData.filter(d => d.type === 'user');
      const pending = requests.filter(d => d.status === 'pending');
      const completed = requests.filter(d => d.status === 'completed');
      const newRequests = requests.filter(d => d.status === 'new');

      document.getElementById('totalRequests').textContent = requests.length;
      document.getElementById('totalUsers').textContent = users.length;
      document.getElementById('pendingRequests').textContent = pending.length;
      document.getElementById('completedRequests').textContent = completed.length;
      document.getElementById('notificationCount').textContent = newRequests.length;
    }

    // Update settings stats
    function updateSettingsStats() {
      const requests = allData.filter(d => d.type === 'contact' || d.type === 'trial');
      const users = allData.filter(d => d.type === 'user');
      
      const settingsRequests = document.getElementById('settingsRequests');
      const settingsUsers = document.getElementById('settingsUsers');
      const storageSize = document.getElementById('storageSize');
      
      if (settingsRequests) settingsRequests.textContent = requests.length;
      if (settingsUsers) settingsUsers.textContent = users.length;
      if (storageSize) {
        const size = new Blob([JSON.stringify(allData)]).size / 1024;
        storageSize.textContent = size.toFixed(2) + ' KB';
      }
    }

    // Render requests table
    function renderRequests() {
      const requests = allData.filter(d => d.type === 'contact' || d.type === 'trial');
      let filtered = requests;

      if (currentFilter.status !== 'all') {
        filtered = filtered.filter(r => r.status === currentFilter.status);
      }

      const searchTerm = document.getElementById('requestSearch')?.value.toLowerCase() || '';
      if (searchTerm) {
        filtered = filtered.filter(r => 
          r.name.toLowerCase().includes(searchTerm) ||
          r.email.toLowerCase().includes(searchTerm) ||
          r.phone.toLowerCase().includes(searchTerm)
        );
      }

      const tbody = document.getElementById('requestsTableBody');
      if (!tbody) return;

      if (filtered.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="6">
              <div class="empty-state">
                <div class="empty-state-icon">üì≠</div>
                <p class="text-lg font-semibold">Kh√¥ng c√≥ y√™u c·∫ßu n√†o</p>
                <p class="text-sm">Th√™m y√™u c·∫ßu m·ªõi ƒë·ªÉ b·∫Øt ƒë·∫ßu</p>
              </div>
            </td>
          </tr>
        `;
        return;
      }

      filtered.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));

      tbody.innerHTML = filtered.map(request => `
        <tr>
          <td>
            <div class="font-semibold text-gray-800">${escapeHtml(request.name)}</div>
            <div class="text-xs text-gray-500">${request.type === 'trial' ? 'üöÄ D√πng th·ª≠' : 'üìû T∆∞ v·∫•n'}</div>
          </td>
          <td>
            <div class="text-sm">${escapeHtml(request.email)}</div>
            <div class="text-sm text-gray-500">${escapeHtml(request.phone)}</div>
          </td>
          <td class="text-sm">${escapeHtml(request.time || request.level || '-')}</td>
          <td>
            <span class="badge badge-${request.status}">${getStatusText(request.status)}</span>
          </td>
          <td class="text-sm text-gray-600">${formatDate(request.created_at)}</td>
          <td>
            <div class="flex gap-2">
              <button onclick="viewRequest('${request.id}')" class="btn btn-secondary btn-sm">üëÅÔ∏è</button>
              <button onclick="deleteRequest('${request.id}')" class="btn btn-danger btn-sm">üóëÔ∏è</button>
            </div>
          </td>
        </tr>
      `).join('');
    }

    // Render users table
    function renderUsers() {
      const users = allData.filter(d => d.type === 'user');
      let filtered = users;

      if (currentFilter.level !== 'all') {
        filtered = filtered.filter(u => u.level === currentFilter.level);
      }

      const searchTerm = document.getElementById('userSearch')?.value.toLowerCase() || '';
      if (searchTerm) {
        filtered = filtered.filter(u => 
          u.name.toLowerCase().includes(searchTerm) ||
          u.email.toLowerCase().includes(searchTerm)
        );
      }

      const tbody = document.getElementById('usersTableBody');
      if (!tbody) return;

      if (filtered.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="6">
              <div class="empty-state">
                <div class="empty-state-icon">üë§</div>
                <p class="text-lg font-semibold">Kh√¥ng c√≥ ng∆∞·ªùi d√πng n√†o</p>
                <p class="text-sm">Th√™m ng∆∞·ªùi d√πng m·ªõi ƒë·ªÉ b·∫Øt ƒë·∫ßu</p>
              </div>
            </td>
          </tr>
        `;
        return;
      }

      filtered.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));

      tbody.innerHTML = filtered.map(user => `
        <tr>
          <td>
            <div class="font-semibold text-gray-800">${escapeHtml(user.name)}</div>
            <div class="text-xs text-gray-500">ID: ${user.id.substring(0, 12)}</div>
          </td>
          <td class="text-sm">${escapeHtml(user.email)}</td>
          <td>
            <span class="badge badge-${user.level}">${getLevelText(user.level)}</span>
          </td>
          <td class="text-sm">${escapeHtml(user.phone)}</td>
          <td class="text-sm text-gray-600">${formatDate(user.created_at)}</td>
          <td>
            <div class="flex gap-2">
              <button onclick="viewUser('${user.id}')" class="btn btn-primary btn-sm">üëÅÔ∏è Xem</button>
              <button onclick="deleteUser('${user.id}')" class="btn btn-danger btn-sm">üóëÔ∏è</button>
            </div>
          </td>
        </tr>
      `).join('');
    }

    // Render recent activity
    function renderRecentActivity() {
      const container = document.getElementById('recentActivity');
      if (!container) return;

      const recent = [...allData]
        .sort((a, b) => new Date(b.created_at) - new Date(a.created_at))
        .slice(0, 5);

      if (recent.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üìä</div>
            <p>Ch∆∞a c√≥ ho·∫°t ƒë·ªông n√†o</p>
          </div>
        `;
        return;
      }

      container.innerHTML = recent.map(item => `
        <div class="flex items-center gap-3 py-2.5 border-b border-gray-100 last:border-0">
          <span class="text-lg">${item.type === 'user' ? 'üë§' : 'üìù'}</span>
          <div class="flex-1">
            <p class="font-medium text-gray-800 text-sm">${escapeHtml(item.name)}</p>
            <p class="text-xs text-gray-500">${item.type === 'user' ? 'ƒêƒÉng k√Ω t√†i kho·∫£n' : 'G·ª≠i y√™u c·∫ßu ' + (item.type === 'trial' ? 'd√πng th·ª≠' : 't∆∞ v·∫•n')}</p>
          </div>
          <span class="text-xs text-gray-500">${formatDate(item.created_at)}</span>
        </div>
      `).join('');
    }

    // Show section
    function showSection(section) {
      document.querySelectorAll('.sidebar-item').forEach(item => {
        item.classList.remove('active');
      });
      event.currentTarget.classList.add('active');

      document.getElementById('overviewSection').classList.add('hidden');
      document.getElementById('requestsSection').classList.add('hidden');
      document.getElementById('usersSection').classList.add('hidden');
      document.getElementById('settingsSection').classList.add('hidden');

      document.getElementById(section + 'Section').classList.remove('hidden');
      
      if (section === 'settings') {
        updateSettingsStats();
      }
    }

    // Filter functions
    function filterByStatus(status, section) {
      currentFilter.status = status;
      currentFilter.section = section;

      document.querySelectorAll('[data-status]').forEach(btn => {
        btn.classList.remove('active');
      });
      event.currentTarget.classList.add('active');

      renderRequests();
    }

    function filterByLevel(level) {
      currentFilter.level = level;

      document.querySelectorAll('[data-level]').forEach(btn => {
        btn.classList.remove('active');
      });
      event.currentTarget.classList.add('active');

      renderUsers();
    }

    function filterRequests() {
      renderRequests();
    }

    function filterUsers() {
      renderUsers();
    }

    // View request details
    function viewRequest(id) {
      const request = allData.find(d => d.id === id);
      if (!request) return;

      document.getElementById('modalContent').innerHTML = `
        <h2 class="text-2xl font-bold gradient-text mb-6">üìù Chi ti·∫øt y√™u c·∫ßu</h2>
        
        <div class="space-y-4 mb-6">
          <div class="info-row">
            <div class="info-label">Lo·∫°i y√™u c·∫ßu:</div>
            <div class="info-value">
              <span class="badge badge-${request.type}">${request.type === 'trial' ? 'üöÄ D√πng th·ª≠' : 'üìû T∆∞ v·∫•n'}</span>
            </div>
          </div>
          <div class="info-row">
            <div class="info-label">H·ªç t√™n:</div>
            <div class="info-value">${escapeHtml(request.name)}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Email:</div>
            <div class="info-value">${escapeHtml(request.email)}</div>
          </div>
          <div class="info-row">
            <div class="info-label">S·ªë ƒëi·ªán tho·∫°i:</div>
            <div class="info-value">${escapeHtml(request.phone)}</div>
          </div>
          ${request.level ? `
          <div class="info-row">
            <div class="info-label">Tr√¨nh ƒë·ªô:</div>
            <div class="info-value">${getLevelText(request.level)}</div>
          </div>
          ` : ''}
          ${request.time ? `
          <div class="info-row">
            <div class="info-label">Th·ªùi gian:</div>
            <div class="info-value">${getTimeText(request.time)}</div>
          </div>
          ` : ''}
          ${request.content ? `
          <div class="info-row">
            <div class="info-label">N·ªôi dung:</div>
            <div class="info-value">${escapeHtml(request.content)}</div>
          </div>
          ` : ''}
          <div class="info-row">
            <div class="info-label">Tr·∫°ng th√°i:</div>
            <div class="info-value">
              <span class="badge badge-${request.status}">${getStatusText(request.status)}</span>
            </div>
          </div>
          <div class="info-row">
            <div class="info-label">Ng√†y t·∫°o:</div>
            <div class="info-value">${formatDate(request.created_at)}</div>
          </div>
        </div>

        <div class="flex gap-3 justify-end">
          ${request.status !== 'completed' ? `
            <button onclick="updateRequestStatus('${id}', 'completed')" class="btn btn-success">
              ‚úÖ ƒê√°nh d·∫•u ho√†n th√†nh
            </button>
          ` : ''}
          ${request.status === 'new' ? `
            <button onclick="updateRequestStatus('${id}', 'pending')" class="btn btn-primary">
              ‚è≥ Chuy·ªÉn sang x·ª≠ l√Ω
            </button>
          ` : ''}
          <button onclick="closeModal()" class="btn btn-secondary">ƒê√≥ng</button>
        </div>
      `;

      document.getElementById('modal').classList.remove('hidden');
    }

    // View user details
    function viewUser(id) {
      const user = allData.find(d => d.id === id);
      if (!user) return;

      document.getElementById('modalContent').innerHTML = `
        <h2 class="text-2xl font-bold gradient-text mb-6">üë§ Th√¥ng tin ng∆∞·ªùi d√πng</h2>
        
        <div class="text-center mb-6">
          <div class="w-24 h-24 rounded-full bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center text-white font-bold text-3xl mx-auto mb-4">
            ${user.name.charAt(0).toUpperCase()}
          </div>
          <h3 class="text-xl font-bold text-gray-800">${escapeHtml(user.name)}</h3>
          <p class="text-gray-500">${escapeHtml(user.email)}</p>
        </div>

        <div class="space-y-4 mb-6">
          <div class="info-row">
            <div class="info-label">ID t√†i kho·∫£n:</div>
            <div class="info-value">
              <code class="text-xs bg-gray-100 px-2 py-1 rounded">${user.id}</code>
            </div>
          </div>
          <div class="info-row">
            <div class="info-label">Tr√¨nh ƒë·ªô:</div>
            <div class="info-value">
              <span class="badge badge-${user.level}">${getLevelText(user.level)}</span>
            </div>
          </div>
          <div class="info-row">
            <div class="info-label">S·ªë ƒëi·ªán tho·∫°i:</div>
            <div class="info-value">${escapeHtml(user.phone)}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Email:</div>
            <div class="info-value">${escapeHtml(user.email)}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Ng√†y ƒëƒÉng k√Ω:</div>
            <div class="info-value">${formatDate(user.created_at)}</div>
          </div>
        </div>

        <div class="card bg-pink-50 mb-6">
          <h4 class="font-bold text-gray-800 mb-3">üìä Th·ªëng k√™ h·ªçc t·∫≠p</h4>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <div class="text-2xl font-bold text-pink-600">-</div>
              <div class="text-sm text-gray-600">B√†i h·ªçc ho√†n th√†nh</div>
            </div>
            <div>
              <div class="text-2xl font-bold text-pink-600">-</div>
              <div class="text-sm text-gray-600">Gi·ªù h·ªçc</div>
            </div>
          </div>
          <p class="text-xs text-gray-500 mt-3 italic">* T√≠nh nƒÉng th·ªëng k√™ chi ti·∫øt s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t</p>
        </div>

        <div class="flex gap-3 justify-end">
          <button onclick="closeModal()" class="btn btn-secondary">ƒê√≥ng</button>
        </div>
      `;

      document.getElementById('modal').classList.remove('hidden');
    }

    // Update request status
    function updateRequestStatus(id, status) {
      if (updateRequest(id, { status })) {
        closeModal();
        showToast('ƒê√£ c·∫≠p nh·∫≠t tr·∫°ng th√°i th√†nh c√¥ng!', 'success');
      } else {
        showToast('C√≥ l·ªói x·∫£y ra khi c·∫≠p nh·∫≠t!', 'error');
      }
    }

    // Delete request
    function deleteRequest(id) {
      const btn = event.currentTarget;
      
      if (!btn.dataset.confirm) {
        btn.dataset.confirm = 'true';
        btn.innerHTML = 'X√°c nh·∫≠n?';
        
        setTimeout(() => {
          delete btn.dataset.confirm;
          btn.innerHTML = 'üóëÔ∏è';
        }, 3000);
        return;
      }

      if (deleteItem(id)) {
        showToast('ƒê√£ x√≥a y√™u c·∫ßu!', 'success');
      } else {
        showToast('C√≥ l·ªói x·∫£y ra!', 'error');
      }
    }

    // Delete user
    function deleteUser(id) {
      const btn = event.currentTarget;
      
      if (!btn.dataset.confirm) {
        btn.dataset.confirm = 'true';
        btn.innerHTML = 'X√°c nh·∫≠n?';
        
        setTimeout(() => {
          delete btn.dataset.confirm;
          btn.innerHTML = 'üóëÔ∏è';
        }, 3000);
        return;
      }

      if (deleteItem(id)) {
        showToast('ƒê√£ x√≥a ng∆∞·ªùi d√πng!', 'success');
      } else {
        showToast('C√≥ l·ªói x·∫£y ra!', 'error');
      }
    }

    // Show add request modal
    function showAddRequestModal() {
      document.getElementById('modalContent').innerHTML = `
        <h2 class="text-2xl font-bold gradient-text mb-6">‚ûï Th√™m y√™u c·∫ßu m·ªõi</h2>
        
        <form onsubmit="handleAddRequest(event)" class="space-y-4">
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Lo·∫°i y√™u c·∫ßu</label>
            <select id="requestType" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-pink-500 focus:outline-none">
              <option value="trial">üöÄ D√πng th·ª≠</option>
              <option value="contact">üìû T∆∞ v·∫•n</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">H·ªç v√† t√™n</label>
            <input type="text" id="requestName" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-pink-500 focus:outline-none">
          </div>
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Email</label>
            <input type="email" id="requestEmail" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-pink-500 focus:outline-none">
          </div>
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">S·ªë ƒëi·ªán tho·∫°i</label>
            <input type="tel" id="requestPhone" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-pink-500 focus:outline-none">
          </div>
          <div id="levelField">
            <label class="block text-sm font-semibold text-gray-700 mb-2">Tr√¨nh ƒë·ªô</label>
            <select id="requestLevel" class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-pink-500 focus:outline-none">
              <option value="beginner">M·ªõi b·∫Øt ƒë·∫ßu (A1)</option>
              <option value="elementary">S∆° c·∫•p (A2)</option>
              <option value="intermediate">Trung c·∫•p (B1)</option>
              <option value="upper">Kh√° (B2)</option>
              <option value="advanced">N√¢ng cao (C1-C2)</option>
            </select>
          </div>
          <div id="timeField" class="hidden">
            <label class="block text-sm font-semibold text-gray-700 mb-2">Th·ªùi gian</label>
            <select id="requestTime" class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-pink-500 focus:outline-none">
              <option value="morning">S√°ng (8h-12h)</option>
              <option value="afternoon">Chi·ªÅu (13h-17h)</option>
              <option value="evening">T·ªëi (18h-21h)</option>
            </select>
          </div>
          <div id="contentField" class="hidden">
            <label class="block text-sm font-semibold text-gray-700 mb-2">N·ªôi dung</label>
            <textarea id="requestContent" rows="4" class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-pink-500 focus:outline-none"></textarea>
          </div>
          <div class="flex gap-3 justify-end">
            <button type="button" onclick="closeModal()" class="btn btn-secondary">H·ªßy</button>
            <button type="submit" class="btn btn-primary">Th√™m y√™u c·∫ßu</button>
          </div>
        </form>
      `;

      document.getElementById('requestType').addEventListener('change', (e) => {
        if (e.target.value === 'trial') {
          document.getElementById('levelField').classList.remove('hidden');
          document.getElementById('timeField').classList.add('hidden');
          document.getElementById('contentField').classList.add('hidden');
        } else {
          document.getElementById('levelField').classList.add('hidden');
          document.getElementById('timeField').classList.remove('hidden');
          document.getElementById('contentField').classList.remove('hidden');
        }
      });

      document.getElementById('modal').classList.remove('hidden');
    }

    // Show add user modal
    function showAddUserModal() {
      document.getElementById('modalContent').innerHTML = `
        <h2 class="text-2xl font-bold gradient-text mb-6">üë§ Th√™m ng∆∞·ªùi d√πng m·ªõi</h2>
        
        <form onsubmit="handleAddUser(event)" class="space-y-4">
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">H·ªç v√† t√™n</label>
            <input type="text" id="userName" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-pink-500 focus:outline-none">
          </div>
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Email</label>
            <input type="email" id="userEmail" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-pink-500 focus:outline-none">
          </div>
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">S·ªë ƒëi·ªán tho·∫°i</label>
            <input type="tel" id="userPhone" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-pink-500 focus:outline-none">
          </div>
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Tr√¨nh ƒë·ªô</label>
            <select id="userLevel" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-pink-500 focus:outline-none">
              <option value="beginner">M·ªõi b·∫Øt ƒë·∫ßu (A1)</option>
              <option value="elementary">S∆° c  p (A2)</option>
              <option value="intermediate">Trung c·∫•p (B1)</option>
              <option value="upper">Kh√° (B2)</option>
              <option value="advanced">N√¢ng cao (C1-C2)</option>
            </select>
          </div>
          <div class="flex gap-3 justify-end">
            <button type="button" onclick="closeModal()" class="btn btn-secondary">H·ªßy</button>
            <button type="submit" class="btn btn-primary">Th√™m ng∆∞·ªùi d√πng</button>
          </div>
        </form>
      `;

      document.getElementById('modal').classList.remove('hidden');
    }

    // Handle add request
    function handleAddRequest(event) {
      event.preventDefault();

      const type = document.getElementById('requestType').value;
      const requestData = {
        type: type,
        name: document.getElementById('requestName').value,
        email: document.getElementById('requestEmail').value,
        phone: document.getElementById('requestPhone').value,
        level: type === 'trial' ? document.getElementById('requestLevel').value : '',
        time: type === 'contact' ? document.getElementById('requestTime').value : '',
        content: type === 'contact' ? (document.getElementById('requestContent').value || '') : '',
        status: 'new'
      };

      addRequest(requestData);
      closeModal();
      showToast('ƒê√£ th√™m y√™u c·∫ßu m·ªõi!', 'success');
    }

    // Handle add user
    function handleAddUser(event) {
      event.preventDefault();

      const userData = {
        type: 'user',
        name: document.getElementById('userName').value,
        email: document.getElementById('userEmail').value,
        phone: document.getElementById('userPhone').value,
        level: document.getElementById('userLevel').value,
        status: 'active',
        time: '',
        content: ''
      };

      addUser(userData);
      closeModal();
      showToast('ƒê√£ th√™m ng∆∞·ªùi d√πng m·ªõi!', 'success');
    }

    // Export data
    function exportData() {
      const dataStr = JSON.stringify(allData, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      const url = URL.createObjectURL(dataBlob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `english-blossom-data-${new Date().toISOString().split('T')[0]}.json`;
      link.click();
      URL.revokeObjectURL(url);
      showToast('ƒê√£ xu·∫•t d·ªØ li·ªáu!', 'success');
    }

    // Refresh data
    function refreshData() {
      loadData();
      showToast('ƒê√£ l√†m m·ªõi d·ªØ li·ªáu!', 'success');
    }

    // Close modal
    function closeModal(event) {
      if (event) event.stopPropagation();
      document.getElementById('modal').classList.add('hidden');
    }

    // Show toast notification
    function showToast(message, type = 'success') {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = `
        <span class="text-2xl">${type === 'success' ? '‚úÖ' : '‚ùå'}</span>
        <span class="font-semibold">${message}</span>
      `;
      
      document.getElementById('toastContainer').appendChild(toast);
      
      setTimeout(() => {
        toast.style.animation = 'slideIn 0.3s ease reverse';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    // Helper functions
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function getStatusText(status) {
      const statusMap = {
        new: 'M·ªõi',
        pending: 'ƒêang x·ª≠ l√Ω',
        completed: 'Ho√†n th√†nh'
      };
      return statusMap[status] || status;
    }

    function getLevelText(level) {
      const levelMap = {
        beginner: 'A1 - M·ªõi b·∫Øt ƒë·∫ßu',
        elementary: 'A2 - S∆° c·∫•p',
        intermediate: 'B1 - Trung c·∫•p',
        upper: 'B2 - Kh√°',
        advanced: 'C1-C2 - N√¢ng cao'
      };
      return levelMap[level] || level;
    }

    function getTimeText(time) {
      const timeMap = {
        morning: 'S√°ng (8h-12h)',
        afternoon: 'Chi·ªÅu (13h-17h)',
        evening: 'T·ªëi (18h-21h)'
      };
      return timeMap[time] || time;
    }

    function formatDate(dateString) {
      const date = new Date(dateString);
      const now = new Date();
      const diffMs = now - date;
      const diffMins = Math.floor(diffMs / 60000);
      const diffHours = Math.floor(diffMs / 3600000);
      const diffDays = Math.floor(diffMs / 86400000);

      if (diffMins < 1) return 'V·ª´a xong';
      if (diffMins < 60) return `${diffMins} ph√∫t tr∆∞·ªõc`;
      if (diffHours < 24) return `${diffHours} gi·ªù tr∆∞·ªõc`;
      if (diffDays < 7) return `${diffDays} ng√†y tr∆∞·ªõc`;

      return date.toLocaleDateString('vi-VN', {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric'
      });
    }

    // Element SDK
    async function onConfigChange(config) {
      document.getElementById('dashboardTitle').textContent = config.dashboard_title || defaultConfig.dashboard_title;
      document.getElementById('welcomeMessage').textContent = config.welcome_message || defaultConfig.welcome_message;

      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const secondaryColor = config.secondary_color || defaultConfig.secondary_color;

      document.querySelectorAll('.gradient-text').forEach(el => {
        el.style.background = `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`;
        el.style.webkitBackgroundClip = 'text';
        el.style.webkitTextFillColor = 'transparent';
        el.style.backgroundClip = 'text';
      });

      document.querySelectorAll('.btn-primary').forEach(el => {
        el.style.background = `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`;
      });
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.primary_color || defaultConfig.primary_color,
            set: (value) => {
              config.primary_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ primary_color: value });
            }
          },
          {
            get: () => config.secondary_color || defaultConfig.secondary_color,
            set: (value) => {
              config.secondary_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ secondary_color: value });
            }
          },
          {
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (value) => {
              config.accent_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ accent_color: value });
            }
          },
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => {
              config.background_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ background_color: value });
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ text_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ["dashboard_title", config.dashboard_title || defaultConfig.dashboard_title],
        ["welcome_message", config.welcome_message || defaultConfig.welcome_message]
      ]);
    }

    // Initialize
    loadData();

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b26edd897cf043d',t:'MTc2NjQ4MzE1OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>